%TODO: convert these to ttyd64 enemy ids. currently they are from black pit
#export .Actor_RedGoomba 00000000

#export:Data $TattleActorIDList {
    
    FFFFFFFF
}

#new:Function $CheckTattleFlag {
    LIO t0, 800DBEDD
    SRL t1, a0, 3 %divide by 8
    ANDI t3, a0, 7
    ADDU t0, t0, t1
    LBU t2, 0000 (t0)
    ORI t4, r0, 1
    SLLV t4, t4, t3
    AND t4, t2, t4
    ORI v0, r0, 1
    BEQL t4, r0, .isZero
    ORI v0, r0, 0
    .isZero
    JR RA
    NOP
}

#export:Function $GetTotalTattleCount {
    PUSH s0, s1, ra
    DADDU s0, r0, r0
    LIO s1, $TattleActorIDList
    %loop
    .loop
    SLL a0, s0, 2 %multiply loop iterator by 4
    ADDU a0, a0, s1
    LW a0, 0000 (a0)
    ADDIU t0, r0, FFFF
    BEQ t0, a0, .exit
    NOP
    BEQ r0, r0, .loop
    ADDIU s0, s0, 1
    .exit
    ADDU v0, s0, r0
    JPOP s0, s1, ra
}

#export:Function $GetTotalTattlesCollected {
    PUSH s0, s1, s2, ra
    DADDU s0, r0, r0
    LIO s1, $TattleActorIDList
    LIO s2, 0 %total tattles
    %loop
    .loop
    SLL a0, s0, 2 %multiply loop iterator by 4
    ADDU a0, a0, s1
    LW a0, 0000 (a0)
    ADDIU t0, r0, FFFF
    BEQ t0, a0, .exit
    NOP
    JAL $CheckTattleFlag
    NOP
    ADDU s2, s2, v0
    BEQ r0, r0, .loop
    ADDIU s0, s0, 1
    .exit
    ADDU v0, s2, r0
    JPOP s0, s1, s2, ra
}